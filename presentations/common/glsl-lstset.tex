% code style for glsl

%\RequirePackage[usenames,dvipsnames]{xcolor}

\usepackage{accsupp}

\definecolor{codeKeyword} {rgb}{0.00, 0.00, 1.00} 
\definecolor{codeComment} {rgb}{0.00, 0.50, 0.00} 
\definecolor{codeBkgnd}   {rgb}{0.92, 0.92, 0.92} 
\definecolor{codeFrame}   {rgb}{0.88, 0.88, 0.88} 

\definecolor{codeKeyword1}{rgb}{0.00, 0.00, 0.75}
\definecolor{codeKeyword2}{rgb}{0.50, 0.00, 0.00}
\definecolor{codeKeyword3}{rgb}{0.13, 0.43, 0.52}
\definecolor{codeKeyword4}{rgb}{0.40, 0.40, 0.40}


\definecolor{lightblue}  {rgb}{0.17, 0.57, 0.69}
\definecolor{darkgreen}  {rgb}{0.00, 0.50, 0.00}
\definecolor{lightgrey}  {rgb}{0.66, 0.66, 0.66}

% http://blog.virtualglobebook.com/2011/02/syntax-highlighting-c-and-glsl-source.html

\lstdefinelanguage{glsl}
{
	sensitive=true
,	morekeywords=[1]
{
	attribute, const, uniform, varying,
	layout, centroid, flat, smooth,
	noperspective, break, continue, do,
	for, while, switch, case, default, if,
	else, in, out, inout, float, int, void,
	bool, true, false, invariant, discard,
	return, mat2, mat3, mat4, mat2x2, mat2x3,
	mat2x4, mat3x2, mat3x3, mat3x4, mat4x2,
	mat4x3, mat4x4, vec2, vec3, vec4, ivec2,
	ivec3, ivec4, bvec2, bvec3, bvec4, uint,
	uvec2, uvec3, uvec4, lowp, mediump, highp,
	precision, sampler1D, sampler2D, sampler3D,
	samplerCube, sampler1DShadow,
	sampler2DShadow, samplerCubeShadow,
	sampler1DArray, sampler2DArray,
	sampler1DArrayShadow, sampler2DArrayShadow,
	isampler1D, isampler2D, isampler3D,
	isamplerCube, isampler1DArray,
	isampler2DArray, usampler1D, usampler2D,
	usampler3D, usamplerCube, usampler1DArray,
	usampler2DArray, sampler2DRect,
	sampler2DRectShadow, isampler2DRect,
	usampler2DRect, samplerBuffer,
	isamplerBuffer, usamplerBuffer, sampler2DMS,
	isampler2DMS, usampler2DMS,
	sampler2DMSArray, isampler2DMSArray,
	usampler2DMSArray, struct
}
,	morekeywords=[2]
{
	radians,degrees,sin,cos,tan,asin,acos,atan,
	atan,sinh,cosh,tanh,asinh,acosh,atanh,pow,
	exp,log,exp2,log2,sqrt,inversesqrt,abs,sign,
	floor,trunc,round,roundEven,ceil,fract,mod,modf,
	min,max,clamp,mix,step,smoothstep,isnan,isinf,
	floatBitsToInt,floatBitsToUint,intBitsToFloat,
	uintBitsToFloat,length,distance,dot,cross,
	normalize,faceforward,reflect,refract,
	matrixCompMult,outerProduct,transpose,
	determinant,inverse,lessThan,lessThanEqual,
	greaterThan,greaterThanEqual,equal,notEqual,
	any,all,not,textureSize,texture,textureProj,
	textureLod,textureOffset,texelFetch,
	texelFetchOffset,textureProjOffset,
	textureLodOffset,textureProjLod,
	textureProjLodOffset,textureGrad,
	textureGradOffset,textureProjGrad,
	textureProjGradOffset,texture1D,texture1DProj,
	texture1DProjLod,texture2D,texture2DProj,
	texture2DLod,texture2DProjLod,texture3D,
	texture3DProj,texture3DLod,texture3DProjLod,
	textureCube,textureCubeLod,shadow1D,shadow2D,
	shadow1DProj,shadow2DProj,shadow1DLod,
	shadow2DLod,shadow1DProjLod,shadow2DProjLod,
	dFdx,dFdy,fwidth,noise1,noise2,noise3,noise4,
	EmitVertex,EndPrimitive
}
,	morekeywords=[3]
{
	gl_VertexID,gl_InstanceID,gl_Position,
	gl_PointSize,gl_ClipDistance,gl_PerVertex,
	gl_Layer,gl_ClipVertex,gl_FragCoord,
	gl_FrontFacing,gl_ClipDistance,gl_FragColor,
	gl_FragData,gl_MaxDrawBuffers,gl_FragDepth,
	gl_PointCoord,gl_PrimitiveID,
	gl_MaxVertexAttribs,gl_MaxVertexUniformComponents,
	gl_MaxVaryingFloats,gl_MaxVaryingComponents,
	gl_MaxVertexOutputComponents,
	gl_MaxGeometryInputComponents,
	gl_MaxGeometryOutputComponents,
	gl_MaxFragmentInputComponents,
	gl_MaxVertexTextureImageUnits,
	gl_MaxCombinedTextureImageUnits,
	gl_MaxTextureImageUnits,
	gl_MaxFragmentUniformComponents,
	gl_MaxDrawBuffers,gl_MaxClipDistances,
	gl_MaxGeometryTextureImageUnits,
	gl_MaxGeometryOutputVertices,
	gl_MaxGeometryOutputVertices,
	gl_MaxGeometryTotalOutputComponents,
	gl_MaxGeometryUniformComponents,
	gl_MaxGeometryVaryingComponents,gl_DepthRange
}
,	morecomment=[l]{//}
,	morecomment=[s]{/*}{*/}
,	morecomment=[l][keywordstyle4]{\#}
,	morecomment=[s][keywordstyle4]{\"}{\"}
}

% This ensures numbers are not copied, but leading spaces are copied, as taken from
% http://tex.stackexchange.com/a/30310

\newcommand{\noncopynumber}[1]{%
    \BeginAccSupp{method=escape,ActualText={}}%
    #1%
    \EndAccSupp{}%
}


\makeatletter
\def\lst@outputspace{{\ifx\lst@bkgcolor\empty\color{white}\else\lst@bkgcolor\fi\lst@visiblespace}}
\makeatother

\lstset{
	basicstyle       = \scriptsize\ttfamily
,	backgroundcolor  = \color{codeBkgnd}
,	rulecolor        = \color{codeFrame}
,	keywordstyle     = \color{codeKeyword}
,	commentstyle     = \color{codeComment}
,	keywordstyle		 = [1]\color{codeKeyword1}
,	keywordstyle		 = [2]\color{codeKeyword2}
,	keywordstyle		 = [3]\color{codeKeyword3}
,	keywordstyle		 = [4]\color{codeKeyword4}
,	numberbychapter  = true
,	numbersep        = 8pt
,	tabsize          =  4          
,	numbers          = left
,	numberstyle      = \tiny\noncopynumber
,	frame            = single
,	framesep         =  4pt
, xleftmargin=\parindent
,	xleftmargin      = 16pt
, framexleftmargin = 16pt
,	abovecaptionskip = \medskipamount
, firstnumber      = 1
, stepnumber       = 1
, columns		 = flexible
, keepspaces 	 = true
}